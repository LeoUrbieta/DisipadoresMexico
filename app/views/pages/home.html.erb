<h1>Bienvenido al software de Disipadores de Calor de Aluminio a Tu Medida</h1>

<%= link_to 'Ir a Ventas', ventas_path %>


<h2>Ingresos en intervalo de Fecha</h2>

<p>
  <%= form_with url: pages_home_path, local: true do |form| %>
  
    <p>
      <%= form.label(:fecha_inicio, "Fecha de inicio:") %>
      <%= form.date_select(:fecha_inicio,
                      selected: Date.today,
                      start_year: Date.today.year - 2,
                      end_year: Date.today.year + 20) %>
    </p>
    <p>
      <%= form.label(:fecha_final, "Fecha de inicio:") %>
      <%= form.date_select(:fecha_final,
                      selected: Date.today,
                      start_year: Date.today.year - 2,
                      end_year: Date.today.year + 20) %>
    </p>
    <p>
      <%= form.label(:facturado, "¿Facturado?") %>
      <%= form.select(:facturado, [[],['Si','true'],['No','false']]) %>
    </p>
    <p>
      <%= form.submit("Buscar") %>
    </p>
  <% end %>
</p>

<p>
  <h3>Ventas</h3>
  <table>
  <% if @ventas.blank? %>
    <tr>
      <td>No hay ventas en este rango o con esas características</td>
    </tr>
  <% else %>
    <tr>
      <th>Fecha</th>
      <th>Nombre de Cliente</th>
      <th>¿Facturado?</th>
    </tr>
  
  
    <% @ventas.each do |venta| %>
      <tr>
          <td><%= venta.fecha %></td>
          <td><%= venta.cliente.nombre %></td> 
          <td><%= venta.facturado %></td>
        <% end %>
      </tr>
    <% end %>
  </table>
</p>


<p>
  <% if @claveSAT != nil %>
    <h3>Claves del SAT</h3>
    <table>
    <% @claveSAT.each do |clave| %>
      <tr>
        <td><%= clave.nombre_producto %></td>
        <td><%= clave.clave_sat %></td> 
      </tr>
    <% end %>
    </table>
  <% end %>  
</p>

<p>
  <% if @suma != nil %>
    <h3>Suma por producto (precio con IVA)</h3>
    <table>
    <% @suma.each do |nombre,suma| %>
      <tr>
        <td> <%="#{nombre}"%> </td>
        <td> <%="#{suma}"%> </td>
      </tr>
    <% end %>
    </table>
  <% end %>
</p>













                  